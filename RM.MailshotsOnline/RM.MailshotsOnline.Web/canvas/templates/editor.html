<nav-component></nav-component>
<options-component></options-component>
<!-- ko if: showTemplatePicker -->
	<template-component></template-component>
<!-- /ko -->
<!-- ko if: showThemePicker -->
	<theme-component></theme-component>
<!-- /ko -->
<!-- ko if: showImageUpload -->
	<upload-component></upload-component>
<!-- /ko -->
<!-- ko if: faces() && faces().length -->
	<!-- main editor -->

	<div class="help" data-bind="css: {'help_error': (message()) && (message().type == 'error'), 'help_visible': message}">
		<!--ko if: message() -->
			<span data-bind="text: message().message"></span>
		<!-- /ko -->
	</div>

	<!-- ko with: viewingSide -->
		<div class="canvas-container" data-bind="click: $parent.unfocusConditional, css: {'canvas-container_selected': false, 'canvas-container_focused': $parent.elementFocused}">
			<tools-component></tools-component>
			<side-component class="side side_large" params="{side: $data}" data-bind="style: {'transform': $parent.scale}"></side-component>
		</div>

		<!-- side picker -->
		<div class="side-picker" data-bind="click: $parent.unfocus, css: {'side-picker_hidden': $parent.elementFocused}">
			<!-- ko foreach: $parent.sides -->
			<div class="side-picker-inner" data-bind="css: {'side-picker-inner_selected': $data == $parent}, click: function() { if ($parent != $data) {$parents[1].toggleSide()} }">
				
				<side-component class="side side_small" params="{side: $data, preview: true}"></side-component>
				<span data-bind="text: $data" class="side-label"></span>
			</div>
			<!-- /ko -->
		</div>
	<!-- /ko -->

	<!-- ko if: isBackgroundSelected -->
	<backgroundtools-component></backgroundtools-component>
	<!-- /ko -->
	<zoom-component></zoom-component>

<!-- /ko -->
<!-- ko if: output -->
	<div data-bind="click: clearOutput" style="position: absolute; bottom: 111px; right: 20px; font-weight: bold; color: #c00; cursor: pointer; z-index: 10;">X</div>
	<textarea class="json-output" data-bind="value: output"></textarea>
<!--/ko -->