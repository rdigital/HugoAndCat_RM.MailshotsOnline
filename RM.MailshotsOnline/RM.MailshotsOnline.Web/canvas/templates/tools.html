<div class="tools" data-bind="css: {'tools_visible': isVisible}, style: attachment, click: focusInput, element: element, event: {mousedown: function() {return false}}">
    <!-- ko if: elementType() == 'roundel' -->

        <div class="tools-row">
            <dropdown-component params="{options: fonts, selected: font, full: true, focusCallback: focusInput, anchorClass: 'tools-dropdown tools-dropdown_full'}"></dropdown-component>
        </div>

        <div class="tools-row">
            <span class="tools-group">
                <span class="tools-button" data-bind="click: bold, css: {'active': isBold()}"><b>B</b></span>
                <span class="tools-button" data-bind="click: underline, css: {'active': isUnderline()}"><u>U</u></span>
                <span class="tools-button" data-bind="click: italic, css: {'active': isItalic()}"><i>I</i></span>
            </span>

            <span class="tools-group tools-group_right">
                <span class="tools-button" data-bind="click: increaseFontSize"><span style="font-size: 20px;">A</span></span>
                <span class="tools-button" data-bind="click: decreaseFontSize"><span style="font-size: 12px;">A</span></span>
                <span class="tools-button" data-bind="click: fitFontSize"><b class="fa fa-arrows"></b></span>
            </span>
        </div>

        <div class="tools-row">
            <div class="tools-left">
                <label>Text Colour:</label>
            </div>
            <div class="tools-right">
                <colourpicker-component params="{options: colours, selected: colour, focusCallback: focusInput, closeCallback: addAllRecentColours, recentColours: recentColours, anchorClass: 'tools-dropdown'}"></colourpicker-component>
            </div>
        </div>
        <div class="tools-row">
            <div class="tools-left">
                <label>Background Colour:</label>
            </div>
            <div class="tools-right">
                <colourpicker-component params="{options: colours, selected: backgroundColour, focusCallback: focusInput, closeCallback: addAllRecentColours, recentColours: recentColours, anchorClass: 'tools-dropdown'}"></colourpicker-component>
            </div>
        </div>

    <!-- /ko -->
    <!-- ko if: elementType() == 'box' -->
        <!-- ko if: borderColour() -->
        <div class="tools-row">
            <div class="tools-left">
                <label>Border Colour:</label>
            </div>
            <div class="tools-right">
                <colourpicker-component params="{options: colours, selected: borderColour, focusCallback: focusInput, closeCallback: addAllRecentColours, recentColours: recentColours, anchorClass: 'tools-dropdown'}"></colourpicker-component>
            </div>
        </div>
        <!-- /ko -->

        <!-- ko if: backgroundColour() -->
        <div class="tools-row">
            <div class="tools-left">
                <label>Background Colour:</label>
            </div>
            <div class="tools-right">
                <colourpicker-component params="{options: colours, selected: backgroundColour, focusCallback: focusInput, closeCallback: addAllRecentColours, recentColours: recentColours, anchorClass: 'tools-dropdown'}"></colourpicker-component>
            </div>
        </div>
        <!-- /ko -->
    <!-- /ko -->
    <!-- ko if: elementType() == 'html' -->

        <!-- ko ifnot: personalizing -->
        <div class="tools-row">
            <dropdown-component params="{options: fonts, selected: font, full: true, template: 'font-dropdown', focusCallback: focusInput, anchorClass: 'tools-dropdown tools-dropdown_full'}"></dropdown-component>
        </div>

        <div class="tools-row">
            <span class="tools-group">
                <span class="tools-button" data-bind="click: bold, css: {'active': isBold()}"><b>B</b></span>
                <span class="tools-button" data-bind="click: underline, css: {'active': isUnderline()}"><u>U</u></span>
                <span class="tools-button" data-bind="click: italic, css: {'active': isItalic()}"><i>I</i></span>
            </span>

            <span class="tools-group tools-group_right">
                <span class="tools-button" data-bind="click: increaseFontSize"><span style="font-size: 20px;">A</span></span>
                <span class="tools-button" data-bind="click: decreaseFontSize"><span style="font-size: 12px;">A</span></span>
                <span class="tools-button" data-bind="click: fitFontSize"><b class="fa fa-arrows"></b></span>
            </span>
        </div>

        <div class="tools-row">
            <span class="tools-group">
                <span class="tools-button fa fa-align-left" data-bind="click: function() {setStyle('text-align', 'left')}, css: {'active': alignment() == 'left'}"></span>
                <span class="tools-button fa fa-align-center" data-bind="click: function() {setStyle('text-align', 'center')}, css: {'active': alignment() == 'center'}"></span>
                <span class="tools-button fa fa-align-right" data-bind="click: function() {setStyle('text-align', 'right')}, css: {'active': alignment() == 'right'}"></span>
                <span class="tools-button fa fa-align-justify" data-bind="click: function() {setStyle('text-align', 'justify')}, css: {'active': alignment() == 'justify'}"></span>
            </span>
            <span class="tools-group tools-group_right">
                <span class="tools-button fa fa-list-ul" data-bind="click: unorderedList"></span>
                <span class="tools-button fa fa-list-ol" data-bind="click: orderedList"></span>
            </span>
        </div>

        <div class="tools-row">
            <div class="tools-left">
                <label>Text Colour:</label>
            </div>
            <div class="tools-right">
                <colourpicker-component params="{options: colours, selected: colour, focusCallback: focusInput, closeCallback: addAllRecentColours, recentColours: recentColours, anchorClass: 'tools-dropdown'}"></colourpicker-component>
            </div>
        </div>

        <!-- ko if: borderColour() -->
        <div class="tools-row">
            <div class="tools-left">
                <label>Border Colour:</label>
            </div>
            <div class="tools-right">
                <colourpicker-component params="{options: colours, selected: borderColour, focusCallback: focusInput, closeCallback: addAllRecentColours, recentColours: recentColours, anchorClass: 'tools-dropdown'}"></colourpicker-component>
            </div>
        </div>
        <!-- /ko -->

        <!-- ko if: backgroundColour() -->
        <div class="tools-row">
            <div class="tools-left">
                <label>Background Colour:</label>
            </div>
            <div class="tools-right">
                <colourpicker-component params="{options: colours, selected: backgroundColour, focusCallback: focusInput, closeCallback: addAllRecentColours, recentColours: recentColours, anchorClass: 'tools-dropdown'}"></colourpicker-component>
            </div>
        </div>
        <!-- /ko -->

        <div class="tools-row">
            <div class="tools-button tools-button-full" data-bind="click: togglePersonalization">
                    Add personalization
            </div>
        </div>
        <!-- /ko -->

        <!-- ko if: personalizing -->
        <div class="tools-row">
            <div class="tools-left tools-left_fixed">
                <label>Field:</label>
            </div>
            <div class="tools-right tools-right_fixed">
                <dropdown-component params="{options: peronalizationOptions, selected: personalizationField, full: true, focusCallback: focusInput, anchorClass: 'tools-dropdown tools-dropdown_full', autohide: true}"></dropdown-component>
            </div>
        </div>
        <div class="tools-row">
            <div class="tools-left tools-left_fixed">
                <label>Fallback:</label>
            </div>
            <div class="tools-right tools-right_fixed">
                <input type="text" class="tools-input" data-bind="click: focusToolsInput, event: {blur: setCaretPosition}, clickBubble: false, value: personalizationFallback"/>
            </div>
        </div>
        <!-- <div class="tools-row"></div> -->
        <!-- ko ifnot: personalizationEl -->
        <div class="tools-row">
            <span class="tools-group">
                <div class="tools-button tools-button-cancel" data-bind="click: closePersonalization">Back</div>
            </span>
            <span class="tools-group tools-group_right">
                <div class="tools-button" data-bind="click: insertPersonalization" style="width: 120px;">Insert</div>
            </span>
        </div>
        <!-- /ko -->
        <!-- ko if: personalizationEl -->
        <div class="tools-row">
            <span class="tools-group">
                <div class="tools-button tools-button-cancel" data-bind="click: deletePersonalization">Remove</div>
            </span>
            <span class="tools-group tools-group_right">
                <div class="tools-button" data-bind="click: insertPersonalization" style="width: 120px;">Update</div>
            </span>
        </div>
        <!-- /ko -->
        <!-- /ko -->
    
    <!-- /ko -->
    <!-- ko if: elementType() == 'image' || elementType() == 'logo' -->
        <!-- ko if: showScale() -->
        <div class="tools-row">
            <div class="tools-slider-container">
                <slider-component params="{min: 1, max: 400, current: selectedElement().imageObj.scale}"></slider-component>
            </div>
            <div class="tools-size-reset icon-undo" data-bind="click: function() {selectedElement().resetSizePosition()}"></div>
        </div>
        <!-- /ko -->
        <div class="tools-row">
            <div class="tools-button tools-button-full tools-image_own" data-bind="click: toggleImageUpload">Upload a new image</div>
            <div class="tools-button tools-button-full tools-image_own_old_ie" data-bind="click: ieClickImageUpload">Upload a new image</div>
        </div>
        <!-- ko if: my_images -->
        <div class="tools-row">
            <div class="tools-button tools-button-full" data-bind="click: toggleMyImages">Use one of My Images</div>
        </div>
        <!-- /ko -->
        <div class="tools-row">
            <div class="tools-button tools-button-full" data-bind="click: toggleImageLibrary">Choose image from Library</div>
        </div>
        <!-- ko if: showScale() -->
        <div class="tools-row">
            <div class="tools-button tools-button-cancel tools-button-cancel_right" data-bind="click: removeImage">Remove image</div>
        </div>
        <!-- /ko -->
    <!-- /ko -->
</div>

<!--[if IE ]>
<div data-bind="template: { afterRender: oldIeSetup }" style="opacity: 0; position: absolute; top: -10000px">
<iframe src="/imageUpload.aspx" id="uploadIframe"></iframe>
</div>
<![endif]-->

<!-- ko if: uploading -->
<div class="uploading" data-bind="click: function() {return false}"></div>
<!-- /ko -->